apiVersion: k8s.cni.cncf.io/v1
kind: NetworkAttachmentDefinition
metadata:
  labels:
    osp/net: ctlplane
  name: ctlplane
spec:
  config: |
    {
      "cniVersion": "0.3.1",
      "name": "ctlplane",
      "type": "macvlan",
      "master": "enp7s0",
      "ipam": {
        "type": "whereabouts",
        "range": "172.20.250.0/24",
        "range_start": "172.20.250.30",
        "range_end": "172.20.250.70"
      }
    }
---
apiVersion: telemetry.openstack.org/v1beta1
kind: Telemetry
metadata:
  name: telemetry-kuttl
spec:
  metricStorage:
    enabled: true
    monitoringStack:
      alertingEnabled: true
      scrapeInterval: 30s
      storage:
        strategy: persistent
        retention: 24h
        persistent:
          pvcStorageRequest: 20G
  autoscaling:
    enabled: true
    aodh:
      secret: osp-secret
      passwordSelectors:
      databaseAccount: aodh
      databaseInstance: openstack
      memcachedInstance: memcached
      notificationsBus:
        cluster: rabbitmq
    heatInstance: heat
  ceilometer:
    enabled: true
    secret: osp-secret
    notificationsBus:
      cluster: rabbitmq
  cloudkitty:
    enabled: true
    s3StorageConfig:
      schemas:
      - effectiveDate: "2024-11-18"
        version: v13
      secret:
        name: logging-loki-s3
        type: s3
    storageClass: local-storage
    lokiRetentionDays: 0
  logging:
    enabled: false
    port: 10514
    cloNamespace: openshift-logging
